<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Hello, world!</title>
	
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

  </head>
  <body>
    <h1>Sajeeb Angular</h1>
	<hr>
	<div class="container" ng-app="myApp" ng-controller="myController">
	<h3>Users {{ msg }}</h3>
	<!-- Button trigger modal -->
<button type="button" class="btn btn-primary float-end" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Create User
</button>

		<table class="table">
		  <thead>
			<tr>
			  <th scope="col">#</th>
			  <th scope="col">Username</th>
			  <th scope="col">Address</th>
			  <th scope="col">Email</th>
			  <th scope="col">Action</th>
			</tr>
		  </thead>
		  <tbody>
			<tr ng-repeat="user in users">
			  <th scope="row">{{$index+1}}</th>
			  <td>{{user.username}}</td>
			  <td>{{user.address}}</td>
			  <td>{{user.email}}</td>
			  <td>
			  <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#editModal" ng-click="selectedUser(user)">Edit</button>
			  <button type="button" class="btn btn-danger" ng-click="deleteUser(user)">Delete</button>
			  </td>
			</tr>
			
		  </tbody>
		</table>
		
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
	    <form>
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add User</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">    
		  <div class="mb-3">
			<label for="" class="form-label">Username</label>
			<input type="text" class="form-control" id="username" aria-describedby="username" ng-model="newUser.username" required>
		  </div>
		  <div class="mb-3">
			<label for="" class="form-label">Email</label>
			<input type="email" class="form-control" id="email" aria-describedby="username" ng-model="newUser.email" required>
		  </div>
		  <div class="mb-3">
			<label for="" class="form-label">Address</label>
			<input type="text" class="form-control" id="address" aria-describedby="address" ng-model="newUser.address" required>
		  </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" ng-click="saveUser()" data-bs-dismiss="modal">Save changes</button>
      </div>
	  </form>
    </div>
  </div>
</div>
<!-- Edit Modal -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
	    <form>
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Eit User</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">    
		  <div class="mb-3">
			<label for="" class="form-label">Username</label>
			<input type="text" class="form-control" id="username" aria-describedby="username" ng-model="editUser.username" required>
		  </div>
		  <div class="mb-3">
			<label for="" class="form-label">Email</label>
			<input type="email" class="form-control" id="email" aria-describedby="username" ng-model="editUser.email" required>
		  </div>
		  <div class="mb-3">
			<label for="" class="form-label">Address</label>
			<input type="text" class="form-control" id="address" aria-describedby="address" ng-model="editUser.address" required>
		  </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" >Close</button>
        <button type="submit" class="btn btn-primary" ng-click="updateUser()" data-bs-dismiss="modal">Save changes</button>
      </div>
	  </form>
    </div>
  </div>
</div>
	</div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
	
		<script>
	var myApp = angular.module("myApp",[]);
	myApp.controller('myController',function($scope){
	$scope.newUser = {}
	$scope.editUser = {}

	$scope.newUser = {}
		$scope.users = [
			{
				username:"Omar",
				email:"ofsajeeb@gmail.com",
				address:"Alexander"
			},{
				username:"Sajeeb",
				email:"ommmfsajeeb@gmail.com",
				address:"Barisal"
			},{
				username:"Mehedi",
				email:"mehedi@gmail.com",
				address:"Gazipur"
			}
		];
		
		$scope.saveUser = function(){
			$scope.users.push($scope.newUser); 
			$scope.newUser = {}
		}
		
		$scope.selectedUser = function(user){
			$scope.editUser = user;
		}
		
		$scope.updateUser = function(user){
			$scope.editUser = {}
		}
		$scope.deleteUser = function(){
			$scope.users.splice($scope.users.indexOf($scope.selectedUser),1); 
		}
	});
	</script>
  </body>
</html>